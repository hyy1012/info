<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>专业开单</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<link rel="stylesheet" href="../../layuiadmin/layui/css/layui.css" media="all">
		<link rel="stylesheet" href="../../layuiadmin/style/admin.css" media="all">
		<link rel="stylesheet" type="text/css" href="../../layuiadmin/layui/extend/steps.css" />
		<style type="text/css">
			body .step-line-box .step-line {
				top: 19px;
			}

			.step-icon-custom-box {
				width: 40px;
				height: 40px;
			}

			.step-icon-custom {
				margin-top: -2px;
				font-size: 26px;
			}
			.demoTable>.layui-inline{margin-right: 10px;}
			.step-icon.step-icon-custom-box:hover{cursor: pointer;}
		</style>
	</head>
	<body>
		<ul class="sidebar hidden-xs">
		<a href="tel:0574-63559457" class="tra"><i class="rtico layui-icon layui-icon-chat"></i>咨询<span class="sbr-400 tra" style="height: 108px;padding-top: 10px;left: -117px;"><img src="../../layuiadmin/img/person.png" alt=""></span></a>
		<a href="tel:0574-63559457" class="tra"><i class="rtico layui-icon layui-icon-login-wechat" style="color: #fff;"></i>微信<span class="sbr-400 tra" style="height: 108px;padding-top: 10px;left: -117px;"><img src="../../layuiadmin/img/weixin.png" alt=""></span></a>
		<a href="tel:0574-63559457" class="tra"><i class="rtico layui-icon layui-icon-cellphone"></i>电话<span class="sbr-400 tra"><i class="r-arr-b"></i>0574-63559457</span></a>
		</ul>
		<!--footer-->
		<footer class="footer">
			<span class="footer-brand">
				<a href="http://www.25175.net" target="_blank"><strong class="text-danger">顺通网络</strong></a>&nbsp;提供技术支持
			</span>
			<p class="no-margin">
				&copy;by <a href="http://www.25175.net/" target="_Blank"><strong>25175</strong></a>
			</p>
		</footer><!-- /footer -->
	<div class="layui-fluid" style="padding-bottom: 50px;">
		<div class="layui-row layui-col-space15">
				
				
			<div class="layui-row">
				<div class="layui-col-md10 layui-col-lg-offset1">
					<div id="step"></div>
				</div>
			</div>
		<div class="demoTable">
				订单编号：
				<div class="layui-inline">
					<input class="layui-input" name="id" id="demoReload" autocomplete="off">
				</div>
				接车人
				<div class="layui-inline">
					<input class="layui-input" name="id" id="demoReload" autocomplete="off">
				</div>
				<button class="layui-btn" data-type="reload">搜索</button>
			</div>
			<div class="layui-row addNews" style="display: none;margin-top: 20px;">
			<div class="layui-col-md12">
				<form class="layui-form" action="">
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label">订单编号</label>
								<div class="layui-input-inline">
									<input type="text" name="name" autocomplete="off" class="layui-input" value="">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">进厂时间</label>
								<div class="layui-input-inline">
									<input type="text" id="date" autocomplete="off" class="layui-input" value="">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">门店</label>
								<div class="layui-input-inline">
									<select name="modules" lay-verify="required" lay-search="">
										<option value="">选择门店</option>
										<option value="1">一店</option>
										<option value="2">二店</option>
										<option value="3">三店</option>
									</select>
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">送车人</label>
								<div class="layui-input-inline">
									<input type="text" name="" autocomplete="off" class="layui-input" value="">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">电话</label>
								<div class="layui-input-inline">
									<input type="text" name="" autocomplete="off" class="layui-input" value="">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">所属公司</label>
								<div class="layui-input-inline">
									<select name="modules" lay-verify="required" lay-search="">
										<option value="">选择所属公司</option>
										<option value="1">公司一</option>
										<option value="2">公司二</option>
										<option value="3">公司三</option>
									</select>
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">车牌</label>
								<div class="layui-input-inline">
									<select name="modules" lay-verify="required" lay-search="">
										<option value="">选择车牌</option>
										<option value="1">黑K12534</option>
										<option value="2">京B52144</option>
										<option value="3">豫A88852</option>
									</select>
								</div>
							</div>
						  <div class="layui-inline">
						  	<label class="layui-form-label">品牌</label>
						  	<div class="layui-input-inline">
						  		<input type="text" name="" autocomplete="off" class="layui-input" value="">
						  	</div>
						  </div>
							<div class="layui-inline">
								<label class="layui-form-label">车型</label>
								<div class="layui-input-inline">
									<input type="text" name="" autocomplete="off" class="layui-input" value="">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">公里数</label>
								<div class="layui-input-inline">
									<input type="text" name="" autocomplete="off" style="width: 90px;display: inline-block;" class="layui-input" value=""> KM
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">油表</label>
								<div class="layui-input-inline">
									<input type="text" name="" autocomplete="off" class="layui-input" value="">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">订单类型</label>
								<div class="layui-input-inline">
									<select name="modules" lay-verify="required" lay-search="">
										<option value="">选择订单类型</option>
										<option value="1">订单类型一</option>
										<option value="2">订单类型二</option>
										<option value="3">订单类型三</option>
									</select>
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">车辆来源</label>
								<div class="layui-input-inline">
									<select name="modules" lay-verify="required" lay-search="">
										<option value="">选择车辆来源</option>
										<option value="1">车辆来源一</option>
										<option value="2">车辆来源二</option>
										<option value="3">车辆来源三</option>
									</select>
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">任务编号</label>
								<div class="layui-input-inline">
									<input type="text" name="" autocomplete="off" class="layui-input" value="">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">问题描述</label>
								<div class="layui-input-inline">
									<input type="text" name="" autocomplete="off" class="layui-input" value="">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">优先等级</label>
								<div class="layui-input-inline">
									<select name="modules" lay-verify="required" lay-search="">
										<option value="">选择优先等级</option>
										<option value="1">非常重要</option>
										<option value="2">重要</option>
										<option value="3">一般</option>
									</select>
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">接车人</label>
								<div class="layui-input-inline">
									<select name="modules" lay-verify="required" lay-search="">
										<option value="">选择接车人</option>
										<option value="1">张三</option>
										<option value="2">李四</option>
										<option value="3">王五</option>
									</select>
								</div>
							</div>
						
						</div>
				</form>
			</div>
		</div>
	
			<div class="layui-row">
				<div class="layui-col-md12">
					<h2>预约列表<button class="layui-btn" style="margin-left: 20px;" onclick="addNew()">添加</button></h2>
					<table class="layui-hide" lay-filter="test" id="test"></table>
				</div>
			</div>
	
		</div>
	</div>
		<script type="text/html" id="important">
			{{#  if(d.importants === 1){ }}
					<span style="color:#f33">非常重要</span>
			{{#  } else if(d.importants === 2){ }}
				  <span style="color:#00CC99">重要</span>
			{{#  } else if(d.importants === 3){ }}
					<span style="color:#3377FF">一般</span>
			{{#  } }}
		</script>
		<script type="text/html" id="barTool">
			<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
			<a class="layui-btn layui-btn-xs" lay-event="edit">接车</a>
		</script>
		<script src="../../layuiadmin/layui/layui.js"></script>
		<script src="../../layuiadmin/layui/extend/steps.js"></script>
		<script>
			layui.config({
				base: '../../layuiadmin/' //静态资源所在路径
			}).extend({
				index: 'lib/index', //主入口模块
			}).use(['index', 'jquery', 'table','laydate'], function() {
				var $ = layui.jquery,laydate=layui.laydate,
					table = layui.table;
				table.render({
					elem: '#test',
					toolbar:true,
					defaultToolbar:["exports"]
					,url:'../../layuiadmin/json/app/dengji.js'
					,cols: [[
						{field:'id', width:80, title: 'ID',sort: true}
						,{field:'orderNumber', title: '订单编号'}
						,{field:'timeInto',  title: '预约时间', }
						,{field:'carNumber',  title: '车牌', }
						,{field:'brand', title: '品牌'}
						,{field:'motorcycleType', title: '车型'}
						,{field:'questionDetail',  title: '问题描述', }
						,{field:'peopleSendCar',  title: '送车人', }
						,{field:'contactWay', title: '联系方式'}
						,{field:'importants',  title: '优先级', toolbar:"#important"}
						,{field:'pickOne',  title: '接车人',event:"pickOnes" }
						,{field:'orderType',  title: '订单状态', }
						,{fixed: 'right', title:'操作', toolbar: '#barTool', width:150}
					]]
					,page: true
				});

				table.on("tool(test)",function(obj){
					var data = obj.data;
					if(obj.event === "del"){
						layer.msg('删除')
					}
					// 接车（编辑)
					if(obj.event==="edit"){
						layer.open({
							title:"编辑单据",
							type:1,
							shadeClose:true,
							area:["400px","500px"],
							btn:["确定","取消"],
							content:$('.addNews'),
							yes:function(index){
								layer.msg('ok')
								layer.close(index);
							}
						})
					}
					// 选择接车人
					if(obj.event === "pickOnes"){
						layer.open({
							title:"选择接车人",
							type: 1,
							shadeClose:true,
							area:["400px","250px"],
							btn:["确定","取消"],
							content:$('#pick_car'),
							yes:function(index){
								layer.close(index)
								obj.update({
									pickOne:$('#pick_car_select').val(),
									orderType:"待检测"
								})
							}
						})
					}
				})
				laydate.render({
					elem:"#date",
					type:"datetime"
				})
						$("body").on("click", ".step-icon.step-icon-custom-box",function(){
							var box = $(this).children('.step-icon-custom').text();
							$('.step-icon.step-icon-custom-box').each(function(i,e){
								if($(this).children('.step-icon-custom').text()==box){
									switch (i){
											case 0:
											  location.href="maintain.html";
												break;
											case 1:
											  location.href="maintain2.html";
												break;
											case 2:
											  location.href="maintain3.html";
												break;
											case 3:
											  location.href="maintain4.html";
												break;
											case 4:
											  location.href="maintain5.html";
												break;
											case 5:
											  location.href="maintain6.html";
												break;
											default:
												break;
									}
								}
							})
					});
			  var time = getNowFormatDate();
				localStorage.setItem("time1",time);
				var steps1 = steps({
					el: "#step",
					data: [{
							title: "登记",
							description: time
						},
						{
							title: "检测",
							description: ""
						},
						{
							title: "定价",
							description: ""
						},
						{
							title: "维修",
							description: ""
						},
						{
							title: "结算",
							description: ""
						},
						{
							title: "出厂",
							description: ""
						}
					],
					active: 0,
					center: true,
					iconType: "custom",
					customClass: "custom-class",
					dataOrder: ["title", "line", "description"]
				});

			});
				function addNew(){
				layui.use(['jquery','form'],function(){
					var $ = layui.jquery,form=layui.form;
					layer.open({
						title:"预约登记",
						type:1,
						shadeClose:true,
						area:["400px","500px"],
						btn:["保存","取消登记"],
						content:$('.addNews'),
						yes:function(index){
							layer.msg('ok')
							layer.close(index);
						}
					})
				})
			}
			function getNowFormatDate() {
					var date = new Date();
					var seperator1 = "-";
					var seperator2 = ":";
					var month = date.getMonth() + 1;
					var strDate = date.getDate();
					if (month >= 1 && month <= 9) {
							month = "0" + month;
					}
					if (strDate >= 0 && strDate <= 9) {
							strDate = "0" + strDate;
					}
					var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate
									+ " " + date.getHours() + seperator2 + date.getMinutes()
									+ seperator2 + date.getSeconds();
					return currentdate;
			}
		</script>
		<!-- 接车人 -->
		<div id="pick_car" style="display: none;margin-top: 30px;">
			<form class="layui-form" action="">
				<div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label">接车人</label>
						<div class="layui-input-inline">
							<select name="modules" lay-verify="required" lay-search="" id="pick_car_select">
								<option value="张三">张三</option>
								<option value="李四">李四</option>
								<option value="王五">王五</option>
							</select>
						</div>
					</div>
				</div>
			</form>
		</div>
	</body>
</html>
